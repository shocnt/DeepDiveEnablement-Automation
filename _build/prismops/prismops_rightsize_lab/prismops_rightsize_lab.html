
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Right-sizing VMs with Prism Ops</title>
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Platform Security" href="../../security/security.html" />
    <link rel="prev" title="Prism Ops Capacity Runway" href="../prismops_capacity_lab/prismops_capacity_lab.html" />

<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

<link href="http://netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

  </head><body>

  <div id="navbar" class="navbar-inverse navbar-default ">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../index.html"><span><img src="../../_static/NutanixWorkshops.svg"></span>
           </a>
        <span class="navbar-text navbar-version pull-left"><b></b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../index.html"> <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><p class="caption"><span class="caption-text">Enterprise Private Cloud</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../dayinlife/dayinlife.html">A Day in the Life</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../dayinlife/dayinlife.html#configuring-storage">Configuring Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../dayinlife/dayinlife.html#provisioning-a-new-network">Provisioning a New Network</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../dayinlife/dayinlife.html#responding-to-vm-creation-requests">Responding to VM Creation Requests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../dayinlife/dayinlife.html#enabling-user-self-service">Enabling User Self Service</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../dayinlife/dayinlife.html#exploring-categories">Exploring Categories</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dayinlife/dayinlife.html#exploring-roles">Exploring Roles</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dayinlife/dayinlife.html#exploring-projects">Exploring Projects</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dayinlife/dayinlife.html#staging-blueprints">Staging Blueprints</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../dayinlife/dayinlife.html#developer-workflow">Developer Workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../dayinlife/dayinlife.html#operator-workflows">Operator Workflows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../dayinlife/dayinlife.html#using-entity-browser-search-and-analysis">Using Entity Browser, Search, and Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../dayinlife/dayinlife.html#improved-life-cycle-management">Improved Life Cycle Management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../dayinlife/dayinlife.html#prism-element-lcm-interactive-demo">5.11 Prism Element LCM Interactive Demo</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dayinlife/dayinlife.html#prism-central-lcm-interactive-demo">5.11 Prism Central LCM Interactive Demo</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../dayinlife/dayinlife.html#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../prismops_capacity_lab/prismops_capacity_lab.html">Prism Ops Capacity Runway</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../prismops_capacity_lab/prismops_capacity_lab.html#lab-setup">Lab Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../prismops_capacity_lab/prismops_capacity_lab.html#capacity-planning-runway-monitoring">Capacity Planning Runway Monitoring</a></li>
<li class="toctree-l2"><a class="reference internal" href="../prismops_capacity_lab/prismops_capacity_lab.html#capacity-planning-runway-analysis">Capacity Planning Runway Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../prismops_capacity_lab/prismops_capacity_lab.html#automate-capacity-forecast-report-generation-with-x-play">Automate Capacity Forecast Report Generation with X-Play</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../prismops_capacity_lab/prismops_capacity_lab.html#takeaways">Takeaways</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Right-sizing VMs with Prism Ops</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#lab-setup">Lab Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="#inefficiency-detection-with-prism-ops-x-fit">Inefficiency Detection with Prism Ops X-FIT</a></li>
<li class="toctree-l2"><a class="reference internal" href="#automatically-increase-constrained-vm-memory-with-x-play">Automatically Increase Constrained VM Memory with X-Play</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#takeaways">Takeaways</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../security/security.html">Platform Security</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../security/security.html#working-with-nutanix-stigs">Working with Nutanix STIGS</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../security/security.html#running-a-stig-report">Running a STIG Report</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../security/security.html#analyzing-the-stig-report">Analyzing the STIG Report</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../security/security.html#compromising-the-environment">Compromising the Environment</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../security/security.html#example-1">Example 1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../security/security.html#example-2">Example 2</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../security/security.html#software-based-encryption">Software Based Encryption</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../security/security.html#audit-logs">Audit Logs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../security/security.html#vm-secure-boot">VM Secure Boot</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../security/security.html#takeaways">Takeaways</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../files/files.html">Consolidating Storage with Files</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../files/files.html#managing-smb-shares">Managing SMB Shares</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../files/files.html#creating-the-share">Creating the Share</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../files/files.html#testing-the-share">Testing the Share</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../files/files.html#file-analytics">File Analytics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../files/files.html#using-nfs-exports">Using NFS Exports</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../files/files.html#enabling-nfs-protocol">Enabling NFS Protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../files/files.html#creating-the-export">Creating the Export</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../files/files.html#testing-the-export">Testing the Export</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../files/files.html#multi-protocol-shares">Multi-Protocol Shares</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../files/files.html#configure-user-mappings">Configure User Mappings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../files/files.html#id1">Testing the Export</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../files/files.html#takeaways">Takeaways</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../flow_secure_fiesta/flow_secure_fiesta.html">Securing Applications with Flow</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../flow_secure_fiesta/flow_secure_fiesta.html#securing-the-fiesta-application">Securing the Fiesta Application</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../flow_secure_fiesta/flow_secure_fiesta.html#defining-category-values">Defining Category Values</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../flow_secure_fiesta/flow_secure_fiesta.html#creating-a-security-policy">Creating a Security Policy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../flow_secure_fiesta/flow_secure_fiesta.html#assigning-category-values">Assigning Category Values</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../flow_secure_fiesta/flow_secure_fiesta.html#monitoring-and-applying-a-security-policy">Monitoring and Applying a Security Policy</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../flow_secure_fiesta/flow_secure_fiesta.html#testing-the-application">Testing the Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../flow_secure_fiesta/flow_secure_fiesta.html#using-flow-visualization">Using Flow Visualization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../flow_secure_fiesta/flow_secure_fiesta.html#applying-flow-policies">Applying Flow Policies</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../flow_secure_fiesta/flow_secure_fiesta.html#takeaways">Takeaways</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Appendix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../tools_vms/windows_tools_vm.html">Windows Tools VM</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../tools_vms/windows_tools_vm.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools_vms/windows_tools_vm.html#deploying-tools-vm">Deploying Tools VM</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../tools_vms/linux_tools_vm.html">Linux Tools VM</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../tools_vms/linux_tools_vm.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools_vms/linux_tools_vm.html#deploying-centos">Deploying CentOS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools_vms/linux_tools_vm.html#installing-tools">Installing Tools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../tools_vms/linux_tools_vm.html#configuring-ntp">Configuring NTP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tools_vms/linux_tools_vm.html#disabling-firewall-and-selinux">Disabling Firewall and SELinux</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tools_vms/linux_tools_vm.html#installing-python">Installing Python</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../appendix/glossary.html">Glossary</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../appendix/glossary.html#nutanix-core">Nutanix Core</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../appendix/glossary.html#aos">AOS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../appendix/glossary.html#pulse">Pulse</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../appendix/glossary.html#prism-element">Prism Element</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../appendix/glossary.html#prism-central">Prism Central</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../appendix/glossary.html#node">Node</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../appendix/glossary.html#block">Block</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../appendix/glossary.html#storage-pool">Storage Pool</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../appendix/glossary.html#storage-container">Storage Container</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../appendix/glossary.html#anatomy-of-a-read-i-o">Anatomy of a Read I/O</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../appendix/glossary.html#anatomy-of-a-write-i-o">Anatomy of a Write I/O</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../appendix/glossary.html#nutanix-flow">Nutanix flow</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../appendix/glossary.html#application-security-policy">Application Security Policy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../appendix/glossary.html#isolation-environment-policy">Isolation Environment Policy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../appendix/glossary.html#quarantine-policy">Quarantine Policy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../appendix/glossary.html#apptier">AppTier</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../appendix/glossary.html#apptype">AppType</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../appendix/glossary.html#environment">Environment</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><p class="caption"><span class="caption-text">Enterprise Private Cloud</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../dayinlife/dayinlife.html">A Day in the Life</a></li>
<li class="toctree-l1"><a class="reference internal" href="../prismops_capacity_lab/prismops_capacity_lab.html">Prism Ops Capacity Runway</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Right-sizing VMs with Prism Ops</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#lab-setup">Lab Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="#inefficiency-detection-with-prism-ops-x-fit">Inefficiency Detection with Prism Ops X-FIT</a></li>
<li class="toctree-l2"><a class="reference internal" href="#automatically-increase-constrained-vm-memory-with-x-play">Automatically Increase Constrained VM Memory with X-Play</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#takeaways">Takeaways</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../security/security.html">Platform Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../files/files.html">Consolidating Storage with Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../flow_secure_fiesta/flow_secure_fiesta.html">Securing Applications with Flow</a></li>
</ul>
<p class="caption"><span class="caption-text">Appendix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../tools_vms/windows_tools_vm.html">Windows Tools VM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools_vms/linux_tools_vm.html">Linux Tools VM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendix/glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    <div class="col-md-9 content">
      
  <div class="section" id="right-sizing-vms-with-prism-ops">
<h1>Right-sizing VMs with Prism Ops<a class="headerlink" href="#right-sizing-vms-with-prism-ops" title="Permalink to this headline">¶</a></h1>
<div class="figure">
<img alt="../../_images/operationstriangle1.png" src="../../_images/operationstriangle1.png" />
</div>
<p>Prism Ops brings smart automation to our customer’s daily IT operations. The typical operations workflow is a continuous cycle of monitoring, analyzing and taking action where necessary. Prism Ops mirrors traditional IT Admin’s workflows to improve operations efficiency. With Prism Ops, IT Admins are able to connect insights from machine data to automate this typical flow using the power of the machine learning engine X-FIT and the X-Play automation engine.</p>
<p>In this lab you will learn how Prism Ops can help IT Admins monitor, analyze and automatically act when a VM’s memory resource is constrained.</p>
<div class="section" id="lab-setup">
<h2>Lab Setup<a class="headerlink" href="#lab-setup" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Open your <strong>Prism Central</strong> and navigate to the <strong>VMs</strong> page. Note down the IP Address of the <strong>GTSPrismOpsLabUtilityServer</strong>. You will need to access this IP Address throughout this lab.</p>
<div class="figure">
<img alt="../../_images/init11.png" src="../../_images/init11.png" />
</div>
</li>
<li><p class="first">Open a new tab in the browser, and navigate to <a class="reference external" href="http://">http://</a><cite>&lt;GTSPrismOpsLabUtilityServer_IP_ADDRESS&gt;</cite>/alerts [example <a class="reference external" href="http://10.42.113.52/alerts">http://10.42.113.52/alerts</a>]. It is possible you may need to log into the VM if you are the first one to use it. In that case, fill out the <strong>Prism Central IP</strong> (from the assignment spreadsheet, not the IP we just documented), <strong>Username</strong> and <strong>Password</strong> and click <strong>Login</strong>.</p>
<div class="figure">
<img alt="../../_images/init21.png" src="../../_images/init21.png" />
</div>
</li>
<li><p class="first">Once you have landed on the alerts page, leave this tab open. It will be used in a later portion of this lab.</p>
<div class="figure">
<img alt="../../_images/init2b1.png" src="../../_images/init2b1.png" />
</div>
</li>
<li><p class="first">In a new tab, navigate to <a class="reference external" href="http://">http://</a><cite>&lt;GTSPrismOpsLabUtilityServer_IP_ADDRESS&gt;</cite>/ to complete the lab from [example <a class="reference external" href="http://10.42.113.52/">http://10.42.113.52/</a>]. Use this tab to complete the lab, unless specifically directed otherwise.</p>
<div class="figure">
<img alt="../../_images/init31.png" src="../../_images/init31.png" />
</div>
</li>
</ol>
</div>
<div class="section" id="inefficiency-detection-with-prism-ops-x-fit">
<h2>Inefficiency Detection with Prism Ops X-FIT<a class="headerlink" href="#inefficiency-detection-with-prism-ops-x-fit" title="Permalink to this headline">¶</a></h2>
<p>Prism Ops uses X-FIT machine learning to detect and monitor the behaviors of VMs running within the managed clusters.</p>
<p>Using machine learning Prism Ops analyzes the data, and applies a classification to VMs that are inefficient. The following are short descriptions of the different classifications:</p>
<blockquote>
<div><ul class="simple">
<li><strong>Overprovisioned:</strong> VMs identified as using minimal amounts of assigned resources.</li>
<li><strong>Inactive:</strong> VMs that have been powered off for a period of time or that are running VMs that do not consume any CPU, memory, or I/O resources.</li>
<li><strong>Constrained:</strong> VMs that could see improved performance with additional resources.</li>
<li><strong>Bully:</strong> VMs identified as using an abundance of resources and affecting other VMs.</li>
</ul>
</div></blockquote>
<ol class="arabic">
<li><p class="first">Select <em class="fa fa-bars"></em> <strong>&gt; Dashboard</strong> (if not already there).</p>
</li>
<li><p class="first">From the Dashboard, take a look at the VM Efficiency widget. This widget gives a summary of inefficient VMs that Prism Ops’s X-FIT machine learning has detected in your environment. Click on the <strong>View All Inefficient VMs</strong> link at the bottom of the widget to take a closer look.</p>
<div class="figure">
<img alt="../../_images/ppro_58.png" src="../../_images/ppro_58.png" />
</div>
</li>
<li><p class="first">You are now viewing the Efficiency focus. The <em>Efficiency Detail</em> column lists specifics on why Prism Ops flagged each VM as inefficient. You can hover the text in the <em>Efficiency Detail</em> column to view the full description.</p>
<div class="figure">
<img alt="../../_images/ppro_59.png" src="../../_images/ppro_59.png" />
</div>
</li>
<li><p class="first">Once an admin has examined the list of VM on the efficiency list, they can determine any VMs they wish to take action against. VMs that have too many or too few resources will require the individual VMs to be resized. This can be done using any of the various methods listed below:</p>
<ul class="simple">
<li><strong>Manually:</strong> An admin edits the VM configuration via Prism (or vCenter for ESXi) and changes the assigned resources.</li>
<li><strong>X-Play:</strong> Use X-Play’s automated playbooks to resize VM(s) automatically via a trigger or admin’s direction. There will be a lab story example of this later in this lab.</li>
<li><strong>Automation:</strong> Use some other method of automation such as powershell or REST-API to resize a VM.</li>
</ul>
<p>Using this machine learning data, Prism Ops is also able to generate baselines, or expected ranges, for VM, Host and Cluster metric data. The X-FIT algorithms learn the normal behavior of these entities and represent that as a baseline range on the different charts. Whenever a metric value deviates from this expected range, Prism Ops will raise an anomaly.</p>
</li>
<li><p class="first">Now let’s take a take a look at a VM by searching for and selecting ‘bootcamp_good_1’.</p>
<div class="figure">
<img alt="../../_images/ppro_61.png" src="../../_images/ppro_61.png" />
</div>
</li>
<li><p class="first">Click on Metrics &gt; CPU Usage. Notice a dark blue line, and a lighter blue area around it. The dark blue line is the CPU Usage. The light blue area is the expected CPU Usage range for this VM. This particular VM is running an application that is upgraded at the same time each day, which explains the usage pattern. Notice that X-FIT detects this usage pattern, and has adjusted the expected range automatically. In this case, an anomaly has been raised for this VM, because the CPU Usage is far above the expected range. You can also reduce the time range to <em>Last 24 hours</em> to examine the chart more closely.</p>
<div class="figure">
<img alt="../../_images/ppro_60.png" src="../../_images/ppro_60.png" />
</div>
</li>
<li><p class="first">Click <strong>Alert Settings</strong> at the upper right to set an alert policy.</p>
</li>
<li><p class="first">On the right hand side, you can change some of the configurations however you choose. In the below example, under <em>Behavioral Anomaly</em>, <em>Every time there is an anomaly, alert</em> was set to Warning, and <em>Ignore all anomalies between</em> was set to 10% and 70%. Under Static threshold, <em>Alert Critical if</em> was configured to &gt; 95%.</p>
<div class="figure">
<img alt="../../_images/ppro_25.png" src="../../_images/ppro_25.png" />
</div>
</li>
<li><p class="first">Hit <strong>Cancel</strong> to exit the policy creation workflow.</p>
</li>
</ol>
</div>
<div class="section" id="automatically-increase-constrained-vm-memory-with-x-play">
<h2>Automatically Increase Constrained VM Memory with X-Play<a class="headerlink" href="#automatically-increase-constrained-vm-memory-with-x-play" title="Permalink to this headline">¶</a></h2>
<p>Now let’s look at how we can take automated action to resolve some of these inefficiencies. For this lab we will assume that this VM is constrained for memory, and will show how we can automatically remediate the right sizing of this VM. We will also use a custom ticket system to give an idea of how this typical workflow could integrate with ticketing system such as ServiceNow.</p>
<ol class="arabic">
<li><p class="first">Navigate to your <strong>_Initials_-LinuxToolsVM</strong>. The examples will use a VM called <strong>ABC - VM</strong>.</p>
<div class="figure">
<img alt="../../_images/rs1.png" src="../../_images/rs1.png" />
</div>
</li>
<li><p class="first">Note the current <strong>Memory Capacity</strong> of the VM, as we will later increase it with X-Play. The placement of widgets may differ for you compared to the below example. Also, you may need to scroll down within the <strong>Properties</strong> widget to find this value.</p>
<div class="figure">
<img alt="../../_images/rs2.png" src="../../_images/rs2.png" />
</div>
</li>
<li><p class="first">Navigate to the <strong>Action Gallery</strong> using the search bar.</p>
<div class="figure">
<img alt="../../_images/rs3.png" src="../../_images/rs3.png" />
</div>
</li>
<li><p class="first">Select the <strong>REST API</strong> action and choose the <strong>Clone</strong> operation from the actions menu.</p>
<div class="figure">
<img alt="../../_images/rs4.png" src="../../_images/rs4.png" />
</div>
</li>
<li><p class="first">We are creating an Action that we can later use in our playbook to generate a service ticket. Fill in the following values, and then click <strong>Copy</strong>.</p>
<ul class="simple">
<li><strong>Name:</strong> <em>Initials</em> - Generate Service Ticket</li>
<li><strong>Method:</strong> POST</li>
<li><strong>URL:</strong> <a class="reference external" href="http:/">http:/</a>/&lt;GTSPrismOpsLabUtilityServer_IP_ADDRESS&gt;/generate_ticket/</li>
<li><strong>Request Body:</strong></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>``{&quot;vm_name&quot;:&quot;{{trigger[0].source_entity_info.name}}&quot;,&quot;vm_id&quot;:&quot;{{trigger[0].source_entity_info.uuid}}&quot;,&quot;alert_name&quot;:&quot;{{trigger[0].alert_entity_info.name}}&quot;,&quot;alert_id&quot;:&quot;{{trigger[0].alert_entity_info.uuid}}&quot;}``
</pre></div>
</div>
<ul class="simple">
<li><strong>Request Header:</strong></li>
</ul>
<p>Content-Type:application/json;charset=utf-8</p>
<div class="figure">
<img alt="../../_images/rs5.png" src="../../_images/rs5.png" />
</div>
</li>
<li><p class="first">Use the search bar to navigate to <strong>Playbooks</strong>.</p>
<div class="figure">
<img alt="../../_images/rs6.png" src="../../_images/rs6.png" />
</div>
</li>
<li><p class="first">Now we will create a Playbook to automate the generation of a service ticket. Click <strong>Create Playbook</strong> at the top of the table view.</p>
<div class="figure">
<img alt="../../_images/rs7.png" src="../../_images/rs7.png" />
</div>
</li>
<li><p class="first">Select <strong>Alert</strong> as a trigger</p>
<div class="figure">
<img alt="../../_images/rs8.png" src="../../_images/rs8.png" />
</div>
</li>
<li><p class="first">Search and select <strong>VM {vm_name} Memory Constrained</strong> as the alert policy.</p>
<div class="figure">
<img alt="../../_images/rs9.png" src="../../_images/rs9.png" />
</div>
</li>
<li><p class="first">Select the <em>Specify VMs</em> radio button and choose the <strong>_Initials_-LinuxToolsVM</strong>. This will make it so only alerts raised on your VM will trigger this Playbook.</p>
<div class="figure">
<img alt="../../_images/rs10.png" src="../../_images/rs10.png" />
</div>
</li>
<li><p class="first">First, we would like to generate a ticket for this alert. Click <strong>Add Action</strong> on the left side, and select the <strong>_Initials_ - Generate Service Ticket</strong> action. Note: For this lab, we set up our own ticketing system to illustrate the full workflow.  You may noticed there is a ServiceNow action which can achieve the same workflow, but specifically for ServiceNow.</p>
<div class="figure">
<img alt="../../_images/rs11.png" src="../../_images/rs11.png" />
</div>
</li>
<li><p class="first">Notice the details from the <strong>Generate Service Ticket</strong> action are automatically filled in for you.</p>
<div class="figure">
<img alt="../../_images/rs12.png" src="../../_images/rs12.png" />
</div>
</li>
<li><p class="first">Next we would like to notify someone that the ticket was created by X-Play. Click <strong>Add Action</strong> and select the Email action. Fill in the field in the email action. Here are the examples.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Be</span> <span class="n">sure</span> <span class="n">to</span> <span class="n">replace</span> <span class="o">&lt;</span><span class="n">GTSPrismOpsLabUtilityServer_IP_ADDRESS</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">message</span> <span class="k">with</span> <span class="n">its</span> <span class="n">IP</span> <span class="n">Address</span><span class="o">.</span>
</pre></div>
</div>
<ul class="simple">
<li><strong>Recipient:</strong> - Fill in your email address.</li>
<li><strong>Subject :</strong></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>``Service Ticket Pending Approval: {{trigger[0].alert_entity_info.name}}``
</pre></div>
</div>
<ul class="simple">
<li><strong>Message:</strong></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>``The alert {{trigger[0].alert_entity_info.name}} triggered Playbook {{playbook.playbook_name}} and has generated a Service ticket for the VM: {{trigger[0].source_entity_info.name}} which is now pending your approval. A ticket has been generated for you to take action on at http://&lt;GTSPrismOpsLabUtilityServer_IP_ADDRESS&gt;/ticketsystem``
</pre></div>
</div>
<div class="figure">
<img alt="../../_images/rs13.png" src="../../_images/rs13.png" />
</div>
</li>
<li><p class="first">Click <strong>Save &amp; Close</strong> button and save it with a name <strong>_Initials_ - Generate Service Ticket for Constrained VM</strong>. <strong>Be sure to click _Enabled_ toggle.</strong></p>
<div class="figure">
<img alt="../../_images/rs14.png" src="../../_images/rs14.png" />
</div>
</li>
<li><p class="first">Now we will create one more Playbook. This will be executed when we resolve the service ticket by adding memory to the affected VM, and sending an email once complete. Click <strong>Create Playbook</strong> at the top of the table view.</p>
<div class="figure">
<img alt="../../_images/rs15.png" src="../../_images/rs15.png" />
</div>
</li>
<li><p class="first">Select <strong>Manual</strong> as the trigger. Note: The ticket system we have constructed for this lab will call the trigger API provided by manual trigger, however this API is not public. In 5.17, we are introducing a Webhook Trigger which will expose a public API that allows achieving this same behavior. Tools like ServiceNow can use this Webhook to call Prism Central to trigger a playbook.</p>
<div class="figure">
<img alt="../../_images/rs16.png" src="../../_images/rs16.png" />
</div>
</li>
<li><p class="first">Select the <strong>VM</strong> entity type from the dropdown, as this playbook will be applied to VMs.</p>
<div class="figure">
<img alt="../../_images/rs17.png" src="../../_images/rs17.png" />
</div>
</li>
<li><p class="first">Click <strong>Add Action</strong> on the left side and select the <strong>VM Add Memory</strong> action.</p>
<div class="figure">
<img alt="../../_images/rs18.png" src="../../_images/rs18.png" />
</div>
</li>
<li><p class="first">Set the empty fields according to the screen below. Next, we would like to notify someone that an automated action was taken. Click <strong>Add Action</strong> to add the email action</p>
<div class="figure">
<img alt="../../_images/rs19.png" src="../../_images/rs19.png" />
</div>
</li>
<li><p class="first">Fill in the field in the email action. Here are the examples.</p>
<ul class="simple">
<li><strong>Recipient:</strong> - Fill in your email address.</li>
<li><strong>Subject :</strong> - <code class="docutils literal notranslate"><span class="pre">Playbook</span> <span class="pre">{{playbook.playbook_name}}</span> <span class="pre">was</span> <span class="pre">executed.</span></code></li>
<li><a href="#id1"><span class="problematic" id="id2">**</span></a>Message:<a href="#id3"><span class="problematic" id="id4">**</span></a><code class="docutils literal notranslate"><span class="pre">{{playbook.playbook_name}}</span> <span class="pre">has</span> <span class="pre">run</span> <span class="pre">and</span> <span class="pre">has</span> <span class="pre">added</span> <span class="pre">1GiB</span> <span class="pre">of</span> <span class="pre">Memory</span> <span class="pre">to</span> <span class="pre">the</span> <span class="pre">VM</span> <span class="pre">{{trigger[0].source_entity_info.name}}.</span></code></li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You are welcome to compose your own subject message. The above is just an example. You could click on <em>Parameters</em> to further customize the message.</p>
</div>
<div class="figure">
<img alt="../../_images/rs20.png" src="../../_images/rs20.png" />
</div>
</li>
<li><p class="first">Last, we would like to notify the ticket service to resolve the ticket. Click <strong>Add Action</strong> to add the <em>REST API</em> action. Fill in the following values replacing the &lt;GTSPrismOpsLabUtilityServer_IP_ADDRESS&gt; in the URL field.</p>
<ul class="simple">
<li><strong>Method:</strong> PUT</li>
<li><strong>URL:</strong> <a class="reference external" href="http:/">http:/</a>/&lt;GTSPrismOpsLabUtilityServer_IP_ADDRESS&gt;/resolve_ticket</li>
<li><strong>Request Body:</strong> <code class="docutils literal notranslate"><span class="pre">{&quot;vm_id&quot;:&quot;{{trigger[0].source_entity_info.uuid}}&quot;}</span></code></li>
<li><strong>Request Header:</strong> Content-Type:application/json;charset=utf-8</li>
</ul>
<div class="figure">
<img alt="../../_images/rs21.png" src="../../_images/rs21.png" />
</div>
</li>
<li><p class="first">Click <strong>Save &amp; Close</strong> button and save it with a name “<em>Initials</em> - Resolve Service Ticket”. <strong>Be sure to click _Enabled_ toggle.</strong></p>
<div class="figure">
<img alt="../../_images/rs22.png" src="../../_images/rs22.png" />
</div>
</li>
<li><p class="first">Now let’s trigger the workflow. Navigate to the tab you opened at the beginning of the lab, with the <strong>/alerts</strong> URL [example 10.42.113.52/alerts]. Select the Radio for <strong>VM Memory Constrained</strong> and select your VM. Click the <strong>Simulate Alert</strong> button. This will simulate a memory constrained alert on your VM.</p>
<div class="figure">
<img alt="../../_images/rs23.png" src="../../_images/rs23.png" />
</div>
</li>
<li><p class="first">You should receive an email to the email address you put down in the first playbook. It may take up to 5 minutes.</p>
<div class="figure">
<img alt="../../_images/rs24.png" src="../../_images/rs24.png" />
</div>
</li>
<li><p class="first">Inside the email click the link to visit the ticket system. Alternatively, you can directly access the ticket system by navigating to <a class="reference external" href="http://">http://</a><cite>&lt;GTSPrismOpsLabUtilityServer_IP_ADDRESS&gt;</cite>/ticketsystem from a new tab in your browser.</p>
<div class="figure">
<img alt="../../_images/rs25.png" src="../../_images/rs25.png" />
</div>
</li>
<li><p class="first">Identify the ticket created for your VM, and click the vertical dots icon to show the Action menu. Click the <strong>Run Playbook</strong> option.</p>
<div class="figure">
<img alt="../../_images/rs26.png" src="../../_images/rs26.png" />
</div>
</li>
<li><p class="first">Choose the 2nd playbook you created <strong>_Initials_ - Resolve Service Ticket</strong> and click <strong>Submit</strong>.</p>
<div class="figure">
<img alt="../../_images/rs27.png" src="../../_images/rs27.png" />
</div>
</li>
<li><p class="first">Switch back to the previous tab with the Prism Central console open. Click on the <strong>_Initials_ - Resolve Service Ticket</strong> playbook, and then click the <strong>Plays</strong> tab towards the top of the view to take a look at the Plays that executed for this playbook. Click on the title of the Play in the table, to take a closer look.</p>
<div class="figure">
<img alt="../../_images/rs29.png" src="../../_images/rs29.png" />
</div>
</li>
<li><p class="first">The sections in this view can be expanded to show more details for each item. If there were any errors, they would also be surfaced in this view.</p>
<div class="figure">
<img alt="../../_images/rs30.png" src="../../_images/rs30.png" />
</div>
</li>
<li><p class="first">You can navigate back to your VM, and verify that the memory was indeed increased by 1 GiB.</p>
<div class="figure">
<img alt="../../_images/rs31.png" src="../../_images/rs31.png" />
</div>
</li>
<li><p class="first">You should also get an email telling you that the playbook ran.</p>
<div class="figure">
<img alt="../../_images/rs32.png" src="../../_images/rs32.png" />
</div>
</li>
</ol>
<div class="section" id="takeaways">
<h3>Takeaways<a class="headerlink" href="#takeaways" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Prism Ops is our solution to make IT OPS smarter and automated. It covers the IT OPS process, from intelligent detection to automated remediation.</li>
<li>X-FIT is our machine learning engine to support smart IT OPS, including anomaly detection and inefficiency detection.</li>
<li>X-Play - the IFTTT for the enterprise - is our engine to enable the automation of daily operations tasks.</li>
<li>X-Play enables admins to confidently automate their daily tasks within minutes.</li>
<li>X-Play is extensive, and can use a customer’s existing APIs and scripts as part of its Playbooks, integrate with their existing ticketing workflows.</li>
</ul>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="../../_sources/prismops/prismops_rightsize_lab/prismops_rightsize_lab.rst.txt"
     rel="nofollow">Source</a>
</div>
      
    </p>
    <p>
        &copy; Copyright 2020 Nutanix.<br/>
    </p>
  </div>
</footer>
  </body>
</html>